---
interface TopProduct {
	id: number;
	title: string;
	total_sold: number;
	revenue: number;
}

interface Props {
	products: TopProduct[];
}

const { products } = Astro.props;
---

<div class="bg-white rounded-3xl border border-secondary/5 shadow-sm overflow-hidden text-left">
	<div class="p-6 border-b border-secondary/5 flex items-center justify-between">
		<h3 class="font-bold text-lg">Más vendidos</h3>
		<a
			href="/admin/products"
			class="text-xs font-bold uppercase tracking-widest text-primary hover:underline"
		>
			Ver todos
		</a>
	</div>

	<div class="divide-y divide-secondary/5">
		{products.map((product, index) => (
			<div class="p-4 hover:bg-accent/5 transition-colors flex items-center gap-4">
				<div class="w-8 h-8 bg-primary/10 rounded-full flex items-center justify-center text-primary font-black text-sm">
					{index + 1}
				</div>
				<div class="flex-1 min-w-0">
					<p class="font-bold text-sm truncate">{product.title}</p>
					<p class="text-xs text-secondary/50">
						{product.total_sold} vendidos · ${product.revenue.toLocaleString()}
					</p>
				</div>
			</div>
		))}
		{products.length === 0 && (
			<div class="p-8 text-center text-secondary/30 italic text-sm">
				Sin ventas registradas aún.
			</div>
		)}
	</div>
</div>
